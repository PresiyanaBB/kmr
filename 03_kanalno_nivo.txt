Протоколи на каналния слой:
1. С асинхронен / синхронен режим на предаване на байтовете
2. Символно-ориентиран / битово-ориентиран
3. С предварително установено съединение / дейтаграмен
4. С откриване на повредени данни / без откриване
5. С откриване на изгубени данни / без откриване
6. С възстановяване на изгубени и повредени данни / без възстановяване
7. С поддръжка на динамична компресия на данните / без поддръжка




Каналите са три вида - симплексни, полудуплексни и дуплексни:
1. Дуплексните канали позволяват едновременно предаване в двете посоки.
2. Полудуплексните канали позволяват предаване и в двете посоки, но в даден момент може да се предава само в една посока.
3. Симплексните канали позволяват предаване само в една посока. 



Основните варианти на прехвърляне на данни:
1. непотвърдено неуставено обслужване (Unacknowledged connectionless service),източникът изпраща независими кадри към получателя, без получателят да ги потвърждава. 
Няма установяване на връзка между двете машини. Реализира се при LAN и предаване на живо.
2. потвърдено неустановено обслужване (Acknowledged connectionless service), отново не се установява връзка между източника и получателя, но
получаването на всеки кадър се потвърждава самостоятелно от получателя. Това дава възможност за повторно изпращане на непотвърдените кадри.
Реализира се при безжично прехвърляне.
3. потвърдено установено обслужване (Acknowledged connectionoriented service), 3 фази - заделяне на връзка и ресурси, пращане, освобождаване на ресурси и спиране на връзка


Flow Control в транспортния слой, защото изпращача праща твърде бързо данни и получателя не смогва


Кадърът (фрейм) има:
1. Хедър
2. Дайта или пейлоад
3. Опашка/ трейлър


Контролна сума - 2 байта и получателя преизчислява и гледа дали съвпадат


Вмъкване на флаг/бит за разделяне на потока на битове



В адаптера е реализиран буфер, в който се записват кадрите, докато изчакват да бъдат предадени нататък.
Кадърът престоява в буфера, докато не се увери, че отсрещната страна го е получила.


има таймаут за потвърждение че данните са получени
ако се изпрати повторно има пореден номер (един бит за 0 или 1) така че да няма дублиране ако получателя получи и двете изпращания
тази проверка става с CRC (cyclic redundancy check — проверка на цикличния остатък) като двете страни смятат какво тр да е. слага се накрая като чек сума на кадъра
идеята е че има полином G с старши и младши член 1, и твоя полином дето е с данните M трябва да се делят на G без остатък => М е по-дълъг от G


Sliding Window Protocols - позволяват изпращане на повече от един кадър, преди да се чака за потвърждение

При загуба на кадър при предаване:
1. Следващите се изхвърлят (Discard), докато се предаде повторно липсващия. Минималната загуба е един round trip time (1 * RTT).
2. Има и един по-мощен приемник, който да приема кадри с последователни номера > текущ и да ги съхранява, докато се попълни празнината от загубените.


Първият протокол на канално ниво, който се използва в IBM е SDLC (synchronous data link control).
По-късно организацията по стандартизация ISO разработва на базата на SDLC протокола HDLC (high-level data link control).
И двата протокола са битово-ориентирани и използват вмъкване на битове за правилно идентифициране на кадрите.
Форматът на кадъра в HDLC е следния: 
  флаг-8        8     номер-8    >=0       16         8
 ___________________________________________________________
| 0111 1110 | Адрес | Контрол | Данни | Чексума | 0111 1110 |
|___________|_______|_________|_______|_________|___________|


Кадрите са три вида - information, supervisory и unnumbered. Пише се в полето Control.
1. Полето Control за information кадрите :
В протокола се използва прозорци с 3-битови номера. Полето Seq е поредния номер на кадъра в прозореца на предавателя.
Полето Next е прикачено потвърждение за насрещния поток - то съдържа номера на следващия кадър, който се очаква от получателя.
Битът P/F се използва при изпращане на кадри към терминали. Ако той е 1, предавателят указва на терминала да предава.
Всички кадри, които терминалът изпраща, освен последния, имат стойност 1 за този бит. За последния изпратен кадър P/F е 0.

2. Полето Control за supervisory кадрите:
Полето Type определя типа на кадъра: 
2.0. тип 0 (RECEIVE READY)
2.1. тип 1 (REJECT) - казва първия неполучен кадър и тр да се пратят вс от него нататък
2.2. тип 2 (RECEIVE NOT READY) - готов съм ама недей ми праща нищо
2.3. тип 3 (SELECTIVE REJECT) - казва първия неполучен кадър и тр да се прати само той


Полето Control за unnumbered кадрите. Тези кадри са служебни и касаят поддържането на съединението, наричат се още команди.

------


Протоколът PPP (Point-to-Point Protocol) е протокол за двуточкова връзка. 
Този протокол се използва за свързване на домашни компютри до доставчици на Интернет услуги по телефонна линия.
Протоколът PPP е байтово-ориентиран и за идентифициране на кадрите се използва техниката вмъкване на байтове. Форматът на кадъра е наследен от HDLC.
Address = 1111 1111
Control = 0000 0011 - unnumbered - ненадеждно и без потвърждения
Protocol = 1 или 2 - за как да се интерпретират данните (синхрон с чексумата)
Data/Payload <= 1500 bytes


Line Control Protocol (LCP) - автоматично конфигуриране на срещуположните интерфейси, използва magic numbers 
Аутентикация - Имаме два варианта:
1. Password Authentication Protocol (PAP) : PAP предава пароли в явен ASCII текст по мрежата, затова е несигурен.
* Клиентът изпраща username и password
* Сървърът връща:
authentication-ack (ако е OK) или
authentication-nak (в противен случай).
2.  Challenge Handshake Authentication Protocol (CHAP).
CHAP периодично проверява идентичността на клиента чрез three-way handshake
Проверката се базира на споделена “тайна” (напр. Паролата на потребителя). Сравнява хешове.

В безжичните мрежи се ползва EAP/ РАР?.


Чрез PPPoE потребителите виртуално “набират номера" на отдалечен сървър на провайдера през Ethernet и установяват “point to point” връзка. 
PPPoE се установява на два точно определени стадия: 
1. PPPoE discovery - двете страни ще трябва да си научат MAC адресите
2. PPP session чрез Session Id


Multiprotocol Label Switching (MPLS) е механизъм за реализация на високопризводителни телекомуникационни мрежи
В MPLS маршрутизаторът препраща пакета през MPLS домейн. MPLS domain се разделя на MPLS ядро (core) и MPLS периферия (edge).


-----------------------------------------------------------------------------------------------------------


LAN-овете имат общ комуникационен канал

При мрежите с общодостъпно предаване основен проблем е да се
определи кой да започне да използва канала, дали да има
състезание или поредност.
Протоколите, които разрешават този проблем се отнасят към
подниво на каналния слой, наречено подниво за достъп до
средата (medium access control - MAC)


Multiple access MA - Aloha


marshrut > host > swich > hub





















